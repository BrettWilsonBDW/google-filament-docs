<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.9.1"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Filament: AssetLoader Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/x-mathjax-config">
  MathJax.Hub.Config({
    extensions: ["tex2jax.js"],
    jax: ["input/TeX","output/HTML-CSS"],
});
</script>
<script type="text/javascript" async="async" src="http://cdn.mathjax.org/mathjax/latest/MathJax.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Filament
   </div>
   <div id="projectbrief">A real time, physically-based renderer (PBR)</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.1 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(document).ready(function(){initNavTree('classfilament_1_1gltfio_1_1_asset_loader.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pub-static-methods">Static Public Member Functions</a>  </div>
  <div class="headertitle">
<div class="title">AssetLoader Class Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>Consumes glTF content and produces <a class="el" href="classfilament_1_1gltfio_1_1_filament_asset.html" title="Owns a bundle of Filament objects that have been created by AssetLoader.">FilamentAsset</a> objects.  
 <a href="classfilament_1_1gltfio_1_1_asset_loader.html#details">More...</a></p>

<p><code>#include &lt;<a class="el" href="_asset_loader_8h_source.html">gltfio/AssetLoader.h</a>&gt;</code></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:aff8b6ada44625140e4f14da573a25a27"><td class="memItemLeft" align="right" valign="top"><a id="aff8b6ada44625140e4f14da573a25a27"></a>
<a class="el" href="classfilament_1_1gltfio_1_1_filament_asset.html">FilamentAsset</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfilament_1_1gltfio_1_1_asset_loader.html#aff8b6ada44625140e4f14da573a25a27">createAsset</a> (const uint8_t *bytes, uint32_t nbytes)</td></tr>
<tr class="memdesc:aff8b6ada44625140e4f14da573a25a27"><td class="mdescLeft">&#160;</td><td class="mdescRight">Takes a pointer to the contents of a GLB or a JSON-based glTF 2.0 file and returns an asset with one instance, or null on failure. <br /></td></tr>
<tr class="separator:aff8b6ada44625140e4f14da573a25a27"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab47fb703e4576d3152fbd4789cd6614b"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classfilament_1_1gltfio_1_1_filament_asset.html">FilamentAsset</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfilament_1_1gltfio_1_1_asset_loader.html#ab47fb703e4576d3152fbd4789cd6614b">createInstancedAsset</a> (const uint8_t *bytes, uint32_t numBytes, <a class="el" href="classfilament_1_1gltfio_1_1_filament_instance.html">FilamentInstance</a> **instances, size_t numInstances)</td></tr>
<tr class="memdesc:ab47fb703e4576d3152fbd4789cd6614b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Consumes the contents of a glTF 2.0 file and produces a primary asset with one or more instances.  <a href="classfilament_1_1gltfio_1_1_asset_loader.html#ab47fb703e4576d3152fbd4789cd6614b">More...</a><br /></td></tr>
<tr class="separator:ab47fb703e4576d3152fbd4789cd6614b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad5fee1eae00a569aaba7386b66a973f4"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classfilament_1_1gltfio_1_1_filament_instance.html">FilamentInstance</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfilament_1_1gltfio_1_1_asset_loader.html#ad5fee1eae00a569aaba7386b66a973f4">createInstance</a> (<a class="el" href="classfilament_1_1gltfio_1_1_filament_asset.html">FilamentAsset</a> *asset)</td></tr>
<tr class="memdesc:ad5fee1eae00a569aaba7386b66a973f4"><td class="mdescLeft">&#160;</td><td class="mdescRight">Adds a new instance to the asset.  <a href="classfilament_1_1gltfio_1_1_asset_loader.html#ad5fee1eae00a569aaba7386b66a973f4">More...</a><br /></td></tr>
<tr class="separator:ad5fee1eae00a569aaba7386b66a973f4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae72f0e0cbe8cd5670d710fe33e712b36"><td class="memItemLeft" align="right" valign="top"><a id="ae72f0e0cbe8cd5670d710fe33e712b36"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfilament_1_1gltfio_1_1_asset_loader.html#ae72f0e0cbe8cd5670d710fe33e712b36">enableDiagnostics</a> (bool enable=true)</td></tr>
<tr class="memdesc:ae72f0e0cbe8cd5670d710fe33e712b36"><td class="mdescLeft">&#160;</td><td class="mdescRight">Allows clients to enable diagnostic shading on newly-loaded assets. <br /></td></tr>
<tr class="separator:ae72f0e0cbe8cd5670d710fe33e712b36"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6a1b7cd2a7b42901b16106b295e7f59b"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfilament_1_1gltfio_1_1_asset_loader.html#a6a1b7cd2a7b42901b16106b295e7f59b">destroyAsset</a> (const <a class="el" href="classfilament_1_1gltfio_1_1_filament_asset.html">FilamentAsset</a> *asset)</td></tr>
<tr class="memdesc:a6a1b7cd2a7b42901b16106b295e7f59b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Destroys the given asset, all of its associated Filament objects, and all associated <a class="el" href="classfilament_1_1gltfio_1_1_filament_instance.html" title="Provides access to a hierarchy of entities that have been instanced from a glTF asset.">FilamentInstance</a> objects.  <a href="classfilament_1_1gltfio_1_1_asset_loader.html#a6a1b7cd2a7b42901b16106b295e7f59b">More...</a><br /></td></tr>
<tr class="separator:a6a1b7cd2a7b42901b16106b295e7f59b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af77da177806b4496b67204f664532948"><td class="memItemLeft" align="right" valign="top"><a id="af77da177806b4496b67204f664532948"></a>
const <a class="el" href="classfilament_1_1_material.html">filament::Material</a> *const  *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfilament_1_1gltfio_1_1_asset_loader.html#af77da177806b4496b67204f664532948">getMaterials</a> () const noexcept</td></tr>
<tr class="memdesc:af77da177806b4496b67204f664532948"><td class="mdescLeft">&#160;</td><td class="mdescRight">Gets a weak reference to an array of cached materials, used internally to create material instances for assets. <br /></td></tr>
<tr class="separator:af77da177806b4496b67204f664532948"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a17b755ff0403f309605cd98329d03eb8"><td class="memItemLeft" align="right" valign="top"><a id="a17b755ff0403f309605cd98329d03eb8"></a>
size_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfilament_1_1gltfio_1_1_asset_loader.html#a17b755ff0403f309605cd98329d03eb8">getMaterialsCount</a> () const noexcept</td></tr>
<tr class="memdesc:a17b755ff0403f309605cd98329d03eb8"><td class="mdescLeft">&#160;</td><td class="mdescRight">Gets the number of cached materials. <br /></td></tr>
<tr class="separator:a17b755ff0403f309605cd98329d03eb8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9dcf510cdcc6284e2fd17b0e5a779ad0"><td class="memItemLeft" align="right" valign="top"><a id="a9dcf510cdcc6284e2fd17b0e5a779ad0"></a>
<a class="el" href="classutils_1_1_name_component_manager.html">utils::NameComponentManager</a> *&#160;</td><td class="memItemRight" valign="bottom"><b>getNames</b> () const noexcept</td></tr>
<tr class="separator:a9dcf510cdcc6284e2fd17b0e5a779ad0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa292746b33d94ee196efbb7380733264"><td class="memItemLeft" align="right" valign="top"><a id="aa292746b33d94ee196efbb7380733264"></a>
<a class="el" href="classfilament_1_1gltfio_1_1_node_manager.html">NodeManager</a> &amp;&#160;</td><td class="memItemRight" valign="bottom"><b>getNodeManager</b> () noexcept</td></tr>
<tr class="separator:aa292746b33d94ee196efbb7380733264"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a45f7b0c826149f928ca4e0a4e17660cd"><td class="memItemLeft" align="right" valign="top"><a id="a45f7b0c826149f928ca4e0a4e17660cd"></a>
<a class="el" href="classfilament_1_1gltfio_1_1_material_provider.html">MaterialProvider</a> &amp;&#160;</td><td class="memItemRight" valign="bottom"><b>getMaterialProvider</b> () noexcept</td></tr>
<tr class="separator:a45f7b0c826149f928ca4e0a4e17660cd"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-static-methods"></a>
Static Public Member Functions</h2></td></tr>
<tr class="memitem:a3a40a20f6d96d0601a12ccc2219373a3"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="classfilament_1_1gltfio_1_1_asset_loader.html">AssetLoader</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfilament_1_1gltfio_1_1_asset_loader.html#a3a40a20f6d96d0601a12ccc2219373a3">create</a> (const <a class="el" href="structfilament_1_1gltfio_1_1_asset_configuration.html">AssetConfiguration</a> &amp;config)</td></tr>
<tr class="memdesc:a3a40a20f6d96d0601a12ccc2219373a3"><td class="mdescLeft">&#160;</td><td class="mdescRight">Creates an asset loader for the given configuration, which specifies the Filament engine.  <a href="classfilament_1_1gltfio_1_1_asset_loader.html#a3a40a20f6d96d0601a12ccc2219373a3">More...</a><br /></td></tr>
<tr class="separator:a3a40a20f6d96d0601a12ccc2219373a3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7f23a95c13c78c53f009876ee1da5dab"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfilament_1_1gltfio_1_1_asset_loader.html#a7f23a95c13c78c53f009876ee1da5dab">destroy</a> (<a class="el" href="classfilament_1_1gltfio_1_1_asset_loader.html">AssetLoader</a> **loader)</td></tr>
<tr class="memdesc:a7f23a95c13c78c53f009876ee1da5dab"><td class="mdescLeft">&#160;</td><td class="mdescRight">Frees the loader.  <a href="classfilament_1_1gltfio_1_1_asset_loader.html#a7f23a95c13c78c53f009876ee1da5dab">More...</a><br /></td></tr>
<tr class="separator:a7f23a95c13c78c53f009876ee1da5dab"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Consumes glTF content and produces <a class="el" href="classfilament_1_1gltfio_1_1_filament_asset.html" title="Owns a bundle of Filament objects that have been created by AssetLoader.">FilamentAsset</a> objects. </p>
<p><a class="el" href="classfilament_1_1gltfio_1_1_asset_loader.html" title="Consumes glTF content and produces FilamentAsset objects.">AssetLoader</a> consumes a blob of glTF 2.0 content (either JSON or GLB) and produces a <a class="el" href="classfilament_1_1gltfio_1_1_filament_asset.html" title="Owns a bundle of Filament objects that have been created by AssetLoader.">FilamentAsset</a> object, which is a bundle of Filament textures, vertex buffers, index buffers, etc. An asset is composed of 1 or more <a class="el" href="classfilament_1_1gltfio_1_1_filament_instance.html" title="Provides access to a hierarchy of entities that have been instanced from a glTF asset.">FilamentInstance</a> objects which contain entities and components.</p>
<p>Clients must use <a class="el" href="classfilament_1_1gltfio_1_1_asset_loader.html" title="Consumes glTF content and produces FilamentAsset objects.">AssetLoader</a> to create and destroy <a class="el" href="classfilament_1_1gltfio_1_1_filament_asset.html" title="Owns a bundle of Filament objects that have been created by AssetLoader.">FilamentAsset</a> objects. This is similar to how <a class="el" href="classfilament_1_1_engine.html" title="Engine is filament&#39;s main entry-point.">filament::Engine</a> is used to create and destroy core objects like <a class="el" href="classfilament_1_1_vertex_buffer.html" title="Holds a set of buffers that define the geometry of a Renderable.">VertexBuffer</a>.</p>
<p><a class="el" href="classfilament_1_1gltfio_1_1_asset_loader.html" title="Consumes glTF content and produces FilamentAsset objects.">AssetLoader</a> does not fetch external buffer data or create textures on its own. Clients can use <a class="el" href="classfilament_1_1gltfio_1_1_resource_loader.html" title="Prepares and uploads vertex buffers and textures to the GPU.">ResourceLoader</a> for this, which obtains the URI list from the asset. This is demonstrated in the code snippet below.</p>
<p><a class="el" href="classfilament_1_1gltfio_1_1_asset_loader.html" title="Consumes glTF content and produces FilamentAsset objects.">AssetLoader</a> also owns a cache of <a class="el" href="classfilament_1_1_material.html">filament::Material</a> objects that may be re-used across multiple loads.</p>
<p>Example usage:</p>
<div class="fragment"><div class="line"><span class="keyword">auto</span> engine = <a class="code" href="classfilament_1_1_engine.html#a4f5ab083a2dc5de37b37b00368a83a6e">Engine::create</a>();</div>
<div class="line"><span class="keyword">auto</span> materials = <a class="code" href="namespacefilament_1_1gltfio.html#a152be4602ccacfbac5f2d821c81b76e8">createJitShaderProvider</a>(engine);</div>
<div class="line"><span class="keyword">auto</span> decoder = <a class="code" href="namespacefilament_1_1gltfio.html#a3e1525c9cba651670254129a845470b7">createStbProvider</a>(engine);</div>
<div class="line"><span class="keyword">auto</span> loader = <a class="code" href="classfilament_1_1gltfio_1_1_asset_loader.html#a3a40a20f6d96d0601a12ccc2219373a3">AssetLoader::create</a>({engine, materials});</div>
<div class="line"> </div>
<div class="line"><span class="comment">// Parse the glTF content and create Filament entities.</span></div>
<div class="line">std::vector&lt;uint8_t&gt; content(...);</div>
<div class="line">FilamentAsset* asset = loader-&gt;createAsset(content.data(), content.size());</div>
<div class="line">content.clear();</div>
<div class="line"> </div>
<div class="line"><span class="comment">// Load buffers and textures from disk.</span></div>
<div class="line">ResourceLoader resourceLoader({engine, <span class="stringliteral">&quot;.&quot;</span>, <span class="keyword">true</span>});</div>
<div class="line">resourceLoader.addTextureProvider(<span class="stringliteral">&quot;image/png&quot;</span>, decoder);</div>
<div class="line">resourceLoader.addTextureProvider(<span class="stringliteral">&quot;image/jpeg&quot;</span>, decoder);</div>
<div class="line">resourceLoader.loadResources(asset);</div>
<div class="line"> </div>
<div class="line"><span class="comment">// Free the glTF hierarchy as it is no longer needed.</span></div>
<div class="line">asset-&gt;releaseSourceData();</div>
<div class="line"> </div>
<div class="line"><span class="comment">// Add renderables to the scene.</span></div>
<div class="line">scene-&gt;addEntities(asset-&gt;getEntities(), asset-&gt;getEntityCount());</div>
<div class="line"> </div>
<div class="line"><span class="comment">// Extract the animator interface from the FilamentInstance.</span></div>
<div class="line"><span class="keyword">auto</span> animator = asset-&gt;getInstance()-&gt;getAnimator();</div>
<div class="line"> </div>
<div class="line"><span class="comment">// Execute the render loop and play the first animation.</span></div>
<div class="line"><span class="keywordflow">do</span> {</div>
<div class="line">     animator-&gt;applyAnimation(0, time);</div>
<div class="line">     animator-&gt;updateBoneMatrices();</div>
<div class="line">     <span class="keywordflow">if</span> (renderer-&gt;beginFrame(swapChain)) {</div>
<div class="line">         renderer-&gt;render(view);</div>
<div class="line">         renderer-&gt;endFrame();</div>
<div class="line">     }</div>
<div class="line">} <span class="keywordflow">while</span> (!quit);</div>
<div class="line"> </div>
<div class="line">scene-&gt;removeEntities(asset-&gt;getEntities(), asset-&gt;getEntityCount());</div>
<div class="line">loader-&gt;destroyAsset(asset);</div>
<div class="line">materials-&gt;destroyMaterials();</div>
<div class="line"><span class="keyword">delete</span> materials;</div>
<div class="line"><span class="keyword">delete</span> decoder;</div>
<div class="line"><a class="code" href="classfilament_1_1gltfio_1_1_asset_loader.html#a7f23a95c13c78c53f009876ee1da5dab">AssetLoader::destroy</a>(&amp;loader);</div>
<div class="line"><a class="code" href="classfilament_1_1_engine.html#ab267cef1714e6c79676b96358ce204a2">Engine::destroy</a>(&amp;engine);</div>
<div class="ttc" id="aclassfilament_1_1_engine_html_a4f5ab083a2dc5de37b37b00368a83a6e"><div class="ttname"><a href="classfilament_1_1_engine.html#a4f5ab083a2dc5de37b37b00368a83a6e">filament::Engine::create</a></div><div class="ttdeci">static Engine *UTILS_NULLABLE create(Backend backend=Backend::DEFAULT, Platform *UTILS_NULLABLE platform=nullptr, void *UTILS_NULLABLE sharedContext=nullptr, const Config *UTILS_NULLABLE config=nullptr)</div><div class="ttdoc">Backward compatibility helper to create an Engine.</div><div class="ttdef"><b>Definition:</b> Engine.h:447</div></div>
<div class="ttc" id="aclassfilament_1_1_engine_html_ab267cef1714e6c79676b96358ce204a2"><div class="ttname"><a href="classfilament_1_1_engine.html#ab267cef1714e6c79676b96358ce204a2">filament::Engine::destroy</a></div><div class="ttdeci">static void destroy(Engine *UTILS_NULLABLE *UTILS_NULLABLE engine)</div><div class="ttdoc">Destroy the Engine instance and all associated resources.</div></div>
<div class="ttc" id="aclassfilament_1_1gltfio_1_1_asset_loader_html_a3a40a20f6d96d0601a12ccc2219373a3"><div class="ttname"><a href="classfilament_1_1gltfio_1_1_asset_loader.html#a3a40a20f6d96d0601a12ccc2219373a3">filament::gltfio::AssetLoader::create</a></div><div class="ttdeci">static AssetLoader * create(const AssetConfiguration &amp;config)</div><div class="ttdoc">Creates an asset loader for the given configuration, which specifies the Filament engine.</div></div>
<div class="ttc" id="aclassfilament_1_1gltfio_1_1_asset_loader_html_a7f23a95c13c78c53f009876ee1da5dab"><div class="ttname"><a href="classfilament_1_1gltfio_1_1_asset_loader.html#a7f23a95c13c78c53f009876ee1da5dab">filament::gltfio::AssetLoader::destroy</a></div><div class="ttdeci">static void destroy(AssetLoader **loader)</div><div class="ttdoc">Frees the loader.</div></div>
<div class="ttc" id="anamespacefilament_1_1gltfio_html_a152be4602ccacfbac5f2d821c81b76e8"><div class="ttname"><a href="namespacefilament_1_1gltfio.html#a152be4602ccacfbac5f2d821c81b76e8">filament::gltfio::createJitShaderProvider</a></div><div class="ttdeci">UTILS_PUBLIC MaterialProvider * createJitShaderProvider(Engine *engine, bool optimizeShaders=false)</div><div class="ttdoc">Creates a material provider that builds materials on the fly, composing GLSL at run time.</div></div>
<div class="ttc" id="anamespacefilament_1_1gltfio_html_a3e1525c9cba651670254129a845470b7"><div class="ttname"><a href="namespacefilament_1_1gltfio.html#a3e1525c9cba651670254129a845470b7">filament::gltfio::createStbProvider</a></div><div class="ttdeci">TextureProvider * createStbProvider(filament::Engine *engine)</div><div class="ttdoc">Creates a simple decoder based on stb_image that can handle &quot;image/png&quot; and &quot;image/jpeg&quot;.</div></div>
</div><!-- fragment --> </div><h2 class="groupheader">Member Function Documentation</h2>
<a id="a3a40a20f6d96d0601a12ccc2219373a3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3a40a20f6d96d0601a12ccc2219373a3">&#9670;&nbsp;</a></span>create()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static <a class="el" href="classfilament_1_1gltfio_1_1_asset_loader.html">AssetLoader</a>* create </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="structfilament_1_1gltfio_1_1_asset_configuration.html">AssetConfiguration</a> &amp;&#160;</td>
          <td class="paramname"><em>config</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Creates an asset loader for the given configuration, which specifies the Filament engine. </p>
<p>The engine is held weakly, used only for the creation and destruction of Filament objects. The optional name component manager can be used to assign names to renderables. The material source specifies whether to use filamat to generate materials on the fly, or to load a small set of precompiled ubershader materials. </p>

</div>
</div>
<a id="ad5fee1eae00a569aaba7386b66a973f4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad5fee1eae00a569aaba7386b66a973f4">&#9670;&nbsp;</a></span>createInstance()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classfilament_1_1gltfio_1_1_filament_instance.html">FilamentInstance</a>* createInstance </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classfilament_1_1gltfio_1_1_filament_asset.html">FilamentAsset</a> *&#160;</td>
          <td class="paramname"><em>asset</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Adds a new instance to the asset. </p>
<p>Use this with caution. It is more efficient to pre-allocate a max number of instances, and gradually add them to the scene as needed. Instances can also be "recycled" by removing and re-adding them to the scene.</p>
<p>NOTE: destroyInstance() does not exist because gltfio favors flat arrays for storage of entity lists and instance lists, which would be slow to shift. We also wish to discourage create/destroy churn, as noted above.</p>
<p>This cannot be called after <a class="el" href="classfilament_1_1gltfio_1_1_filament_asset.html#af524c36a0a837bf9fff06828c222dd8c" title="Reclaims CPU-side memory for URI strings, binding lists, and raw animation data.">FilamentAsset::releaseSourceData()</a>. See also <a class="el" href="classfilament_1_1gltfio_1_1_asset_loader.html#ab47fb703e4576d3152fbd4789cd6614b" title="Consumes the contents of a glTF 2.0 file and produces a primary asset with one or more instances.">AssetLoader::createInstancedAsset()</a>. </p>

</div>
</div>
<a id="ab47fb703e4576d3152fbd4789cd6614b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab47fb703e4576d3152fbd4789cd6614b">&#9670;&nbsp;</a></span>createInstancedAsset()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classfilament_1_1gltfio_1_1_filament_asset.html">FilamentAsset</a>* createInstancedAsset </td>
          <td>(</td>
          <td class="paramtype">const uint8_t *&#160;</td>
          <td class="paramname"><em>bytes</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>numBytes</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classfilament_1_1gltfio_1_1_filament_instance.html">FilamentInstance</a> **&#160;</td>
          <td class="paramname"><em>instances</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>numInstances</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Consumes the contents of a glTF 2.0 file and produces a primary asset with one or more instances. </p>
<p>The primary asset has ownership over the instances.</p>
<p>The returned instances share their textures, materials, and vertex buffers with the primary asset. However each instance has its own unique set of entities, transform components, material instances, and renderable components. Instances are freed when the primary asset is freed.</p>
<p>Light components are not instanced, they belong only to the primary asset.</p>
<p>Clients must use <a class="el" href="classfilament_1_1gltfio_1_1_resource_loader.html" title="Prepares and uploads vertex buffers and textures to the GPU.">ResourceLoader</a> to load resources on the primary asset.</p>
<p>The entity accessor and renderable stack API in the primary asset can be used to control the union of all instances. The individual <a class="el" href="classfilament_1_1gltfio_1_1_filament_instance.html" title="Provides access to a hierarchy of entities that have been instanced from a glTF asset.">FilamentInstance</a> objects can be used to access each instance's partition of entities. Similarly, the <a class="el" href="classfilament_1_1gltfio_1_1_animator.html" title="Updates matrices according to glTF animation and skin definitions.">Animator</a> in the primary asset controls all instances. To animate instances individually, use <a class="el" href="classfilament_1_1gltfio_1_1_filament_instance.html#ae5d022952a210015912938690e56e9cf" title="Returns the animation engine for the instance.">FilamentInstance::getAnimator()</a>.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">bytes</td><td>the contents of a glTF 2.0 file (JSON or GLB) </td></tr>
    <tr><td class="paramname">numBytes</td><td>the number of bytes in "bytes" </td></tr>
    <tr><td class="paramname">instances</td><td>destination pointer, to be populated by the requested number of instances </td></tr>
    <tr><td class="paramname">numInstances</td><td>requested number of instances </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>the primary asset that has ownership over all instances </dd></dl>

</div>
</div>
<a id="a7f23a95c13c78c53f009876ee1da5dab"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7f23a95c13c78c53f009876ee1da5dab">&#9670;&nbsp;</a></span>destroy()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void destroy </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classfilament_1_1gltfio_1_1_asset_loader.html">AssetLoader</a> **&#160;</td>
          <td class="paramname"><em>loader</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Frees the loader. </p>
<p>This does not not automatically free the cache of materials, nor does it free the entities for created assets (see destroyAsset). </p>

</div>
</div>
<a id="a6a1b7cd2a7b42901b16106b295e7f59b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6a1b7cd2a7b42901b16106b295e7f59b">&#9670;&nbsp;</a></span>destroyAsset()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void destroyAsset </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classfilament_1_1gltfio_1_1_filament_asset.html">FilamentAsset</a> *&#160;</td>
          <td class="paramname"><em>asset</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Destroys the given asset, all of its associated Filament objects, and all associated <a class="el" href="classfilament_1_1gltfio_1_1_filament_instance.html" title="Provides access to a hierarchy of entities that have been instanced from a glTF asset.">FilamentInstance</a> objects. </p>
<p>This destroys entities, components, material instances, vertex buffers, index buffers, and textures. This does not necessarily immediately free all source data, since texture decoding or GPU uploading might be underway. </p>

</div>
</div>
<hr/>The documentation for this class was generated from the following file:<ul>
<li>/mnt/c/Users/Brett/Downloads/filament-main/libs/gltfio/include/gltfio/<a class="el" href="_asset_loader_8h_source.html">AssetLoader.h</a></li>
</ul>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><b>filament</b></li><li class="navelem"><a class="el" href="namespacefilament_1_1gltfio.html">gltfio</a></li><li class="navelem"><a class="el" href="classfilament_1_1gltfio_1_1_asset_loader.html">AssetLoader</a></li>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.1 </li>
  </ul>
</div>
</body>
</html>

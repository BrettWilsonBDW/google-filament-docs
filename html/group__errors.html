<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.9.1"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Filament: Handling Catastrophic Failures (Panics)</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/x-mathjax-config">
  MathJax.Hub.Config({
    extensions: ["tex2jax.js"],
    jax: ["input/TeX","output/HTML-CSS"],
});
</script>
<script type="text/javascript" async="async" src="http://cdn.mathjax.org/mathjax/latest/MathJax.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Filament
   </div>
   <div id="projectbrief">A real time, physically-based renderer (PBR)</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.1 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(document).ready(function(){initNavTree('group__errors.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#nested-classes">Data Structures</a> &#124;
<a href="#define-members">Macros</a>  </div>
  <div class="headertitle">
<div class="title">Handling Catastrophic Failures (Panics)</div>  </div>
</div><!--header-->
<div class="contents">

<p>Failure detection and reporting facilities.  
<a href="#details">More...</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="nested-classes"></a>
Data Structures</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">class &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classutils_1_1_panic.html">Panic</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">Base class of all exceptions thrown by all the ASSERT macros.  <a href="classutils_1_1_panic.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">class &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classutils_1_1_t_panic.html">TPanic&lt; T &gt;</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">Concrete implementation of the <a class="el" href="classutils_1_1_panic.html" title="Base class of all exceptions thrown by all the ASSERT macros.">Panic</a> interface.  <a href="classutils_1_1_t_panic.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">class &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classutils_1_1_precondition_panic.html">PreconditionPanic</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">ASSERT_PRECONDITION uses this <a class="el" href="classutils_1_1_panic.html" title="Base class of all exceptions thrown by all the ASSERT macros.">Panic</a> to report a precondition failure.  <a href="classutils_1_1_precondition_panic.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">class &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classutils_1_1_postcondition_panic.html">PostconditionPanic</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">ASSERT_POSTCONDITION uses this <a class="el" href="classutils_1_1_panic.html" title="Base class of all exceptions thrown by all the ASSERT macros.">Panic</a> to report a postcondition failure.  <a href="classutils_1_1_postcondition_panic.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">class &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classutils_1_1_arithmetic_panic.html">ArithmeticPanic</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">ASSERT_ARITHMETIC uses this <a class="el" href="classutils_1_1_panic.html" title="Base class of all exceptions thrown by all the ASSERT macros.">Panic</a> to report an arithmetic (postcondition) failure.  <a href="classutils_1_1_arithmetic_panic.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="define-members"></a>
Macros</h2></td></tr>
<tr class="memitem:ga6c2bbdd009ff224dfc99da167a249edd"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__errors.html#ga6c2bbdd009ff224dfc99da167a249edd">ASSERT_PRECONDITION</a>(cond,  format, ...)&#160;&#160;&#160;    (!UTILS_LIKELY(cond) ? PANIC_PRECONDITION(format, ##__VA_ARGS__) : (void)0)</td></tr>
<tr class="memdesc:ga6c2bbdd009ff224dfc99da167a249edd"><td class="mdescLeft">&#160;</td><td class="mdescRight">ASSERT_PRECONDITION is a macro that checks the given condition and reports a PreconditionPanic if it evaluates to false.  <a href="group__errors.html#ga6c2bbdd009ff224dfc99da167a249edd">More...</a><br /></td></tr>
<tr class="separator:ga6c2bbdd009ff224dfc99da167a249edd"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga6699796354d3390864ae84163593af28"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__errors.html#ga6699796354d3390864ae84163593af28">ASSERT_POSTCONDITION</a>(cond,  format, ...)&#160;&#160;&#160;    (!UTILS_LIKELY(cond) ? PANIC_POSTCONDITION(format, ##__VA_ARGS__) : (void)0)</td></tr>
<tr class="memdesc:ga6699796354d3390864ae84163593af28"><td class="mdescLeft">&#160;</td><td class="mdescRight">ASSERT_POSTCONDITION is a macro that checks the given condition and reports a PostconditionPanic if it evaluates to false.  <a href="group__errors.html#ga6699796354d3390864ae84163593af28">More...</a><br /></td></tr>
<tr class="separator:ga6699796354d3390864ae84163593af28"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga689b04f04a7f1a4ae53234b06668f23d"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__errors.html#ga689b04f04a7f1a4ae53234b06668f23d">ASSERT_ARITHMETIC</a>(cond,  format, ...)&#160;&#160;&#160;    (!(cond) ? PANIC_ARITHMETIC(format, ##__VA_ARGS__) : (void)0)</td></tr>
<tr class="memdesc:ga689b04f04a7f1a4ae53234b06668f23d"><td class="mdescLeft">&#160;</td><td class="mdescRight">ASSERT_ARITHMETIC is a macro that checks the given condition and reports a ArithmeticPanic if it evaluates to false.  <a href="group__errors.html#ga689b04f04a7f1a4ae53234b06668f23d">More...</a><br /></td></tr>
<tr class="separator:ga689b04f04a7f1a4ae53234b06668f23d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gad56f7552f6625d78c39f87fadd7f790f"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__errors.html#gad56f7552f6625d78c39f87fadd7f790f">ASSERT_DESTRUCTOR</a>(cond,  format, ...)&#160;&#160;&#160;(!(cond) ? PANIC_LOG(format, ##__VA_ARGS__) : (void)0)</td></tr>
<tr class="memdesc:gad56f7552f6625d78c39f87fadd7f790f"><td class="mdescLeft">&#160;</td><td class="mdescRight">ASSERT_DESTRUCTOR is a macro that checks the given condition and logs an error if it evaluates to false.  <a href="group__errors.html#gad56f7552f6625d78c39f87fadd7f790f">More...</a><br /></td></tr>
<tr class="separator:gad56f7552f6625d78c39f87fadd7f790f"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<p>Failure detection and reporting facilities. </p>
<h2>What's a Panic?</h2>
<p>In the context of this document, a <em>panic</em> is a type of error due to a <em>contract violation</em>, it shouldn't be confused with a <em>result</em> or <em>status</em> code. The POSIX API for instance, unfortunately often conflates the two. </p><dl class="section see"><dt>See also</dt><dd><a href="http://en.wikipedia.org/wiki/Design_by_contract">http://en.wikipedia.org/wiki/Design_by_contract</a></dd></dl>
<p>Here we give the following definition of a <em>panic</em>:</p>
<ol type="1">
<li><p class="startli">Failures to meet a function's own <b>postconditions</b><br  />
 The function cannot establish one of its own postconditions, such as (but not limited to) producing a valid return value object.</p>
<p class="startli">Often these failures are only detectable at runtime, for instance they can be caused by arithmetic errors, as it was the case for the Ariane 5 rocket. Ariane 5 crashed because it reused an inertial module from Ariane 4, which didn't account for the greater horizontal acceleration of Ariane 5 and caused an overflow in the computations. Ariane 4's module wasn't per-say buggy, but was improperly used and failed to meet, obviously, certain postconditions. </p><dl class="section see"><dt>See also</dt><dd><a href="http://en.wikipedia.org/wiki/Cluster_(spacecraft)">http://en.wikipedia.org/wiki/Cluster_(spacecraft)</a></dd></dl>
</li>
<li><p class="startli">Failures to meet the <b>preconditions</b> of any of a function's callees<br  />
 The function cannot meet a precondition of another function it must call, such as a restriction on a parameter.</p>
<p class="startli">Not to be confused with the case where the preconditions of a function are already violated upon entry, which indicates a programming error from the caller.</p>
<p class="startli">Typically these failures can be avoided and arise because of programming errors.</p>
</li>
</ol>
<hr  />
 <h2>Failure reporting vs. handling</h2>
<p>Very often when a panic, as defined above, is detected, the program has little other choice but to terminate.<br  />
Typically these situations can be handled by <em>assert()</em>. However, <em>assert()</em> also conflates two very different concepts: detecting and handling failures.<br  />
The place where a failure is detected is rarely the place where there is enough context to decide what to do. <em>assert()</em> terminates the program which, may or may not be appropriate. At the very least the failure must be logged (which <em>assert()</em> does in a crude way), but some other actions might need to happen, such as:<br  />
</p><ul>
<li>logging the failure in the system-wide logger</li>
<li>providing enough information in development builds to analyze/debug the problem</li>
<li>cleanly releasing some resources, such as communication channels with other processes<br  />
 e.g.: to avoid their pre- or postconditions from being violated as well.</li>
</ul>
<p>In some <em>rare</em> cases, the failure might even be ignored altogether because it doesn't matter in the context where it happened. This decision clearly doesn't always lie at the failure-site.</p>
<p>It is therefore important to separate failure detection from handling.</p>
<hr  />
 <h2>Failure detection and handling facilities</h2>
<p>Clearly, catastrophic failures should be <b>rare</b>; in fact they should never happen, except possibly for "failures to meet a function's own postconditions", which may depend on external factors and should still be very rare. Yet, when a failure happens, it must be detected and handled appropriately.<br  />
Since panics are rare, it is desirable that the handling mechanism be as unobtrusive as possible, without allowing such failures to go unnoticed or swallowed by mistake. Ideally, the programmer using an API should have nothing special to do to handle that API's failure conditions.<br  />
<br  />
 An important feature of the Panic Handling facilities here is that <b>panics are not part of the API of a function or method</b><br  />
<br  />
</p>
<p>The panic handling facility has the following benefits:</p><ul>
<li>provides an easy way to detect and report failure</li>
<li>separates failure detection from handling</li>
<li>makes it hard for detected failures to be ignored (i.e.: not handled)</li>
<li>doesn't add burden on the API design</li>
<li>doesn't add overhead (visual or otherwise) at call sites</li>
<li>has very little performance overhead for failure detection</li>
<li>has little to no performance impact for failure handling in the common (success) case</li>
<li>is flexible and extensible</li>
</ul>
<p>Since we have established that failures are <b>rare</b>, <b>exceptional</b> situations, it would be appropriate to handle them with an <em>assert</em> mechanism and that's what the API below provides. However, under-the-hood it uses C++ exceptions as a means to separate <em>reporting</em> from <em>handling</em>.</p>
<dl class="section note"><dt>Note</dt><dd>On devices where exceptions are not supported or appropriate, these APIs can be turned into a regular <em>std::terminate()</em>.</dd></dl>
<pre class="fragment">     ASSERT_PRECONDITION(condition, format, ...)
     ASSERT_POSTCONDITION(condition, format, ...)
     ASSERT_ARITHMETIC(condition, format, ...)
     ASSERT_DESTRUCTOR(condition, format, ...)
</pre><dl class="section see"><dt>See also</dt><dd><a class="el" href="group__errors.html#ga6c2bbdd009ff224dfc99da167a249edd" title="ASSERT_PRECONDITION is a macro that checks the given condition and reports a PreconditionPanic if it ...">ASSERT_PRECONDITION</a>, <a class="el" href="group__errors.html#ga6699796354d3390864ae84163593af28" title="ASSERT_POSTCONDITION is a macro that checks the given condition and reports a PostconditionPanic if i...">ASSERT_POSTCONDITION</a>, <a class="el" href="group__errors.html#ga689b04f04a7f1a4ae53234b06668f23d" title="ASSERT_ARITHMETIC is a macro that checks the given condition and reports a ArithmeticPanic if it eval...">ASSERT_ARITHMETIC</a> </dd>
<dd>
<a class="el" href="group__errors.html#gad56f7552f6625d78c39f87fadd7f790f" title="ASSERT_DESTRUCTOR is a macro that checks the given condition and logs an error if it evaluates to fal...">ASSERT_DESTRUCTOR</a></dd></dl>
<hr  />
 <h2>Writing code that can assert</h2>
<p>Because we've separated failure reporting from failure handling, there are some considerations that need to be thought about when writing code that calls the macros above (i.e.: the program won't terminate at the point where the failure is detected).<br  />
<br  />
</p>
<h3>Panic guarantees</h3>
<p>After the failure condition is reported by a function, additional guarantees may be provided with regards to the state of the program. The following four levels of guarantee are generally recognized, each of which is a strict superset of its successors:</p>
<ol type="1">
<li>Nothrow exception guarantee<br  />
 The function never asserts. e.g.: This should always be the case with destructors.<br  />
<br  />
</li>
<li>Strong exception guarantee<br  />
 If the function asserts, the state of the program is rolled back to the state just before the function call.<br  />
<br  />
</li>
<li>Basic exception guarantee<br  />
 If the function asserts, the program is in a valid state. It may require cleanup, but all invariants are intact.<br  />
<br  />
</li>
<li>No exception guarantee<br  />
 If the function asserts, the program may not be in a valid state: resource leaks, memory corruption, or other invariant-destroying failures may have occurred.</li>
</ol>
<p>In each function, give the <b>strongest</b> safety guarantee that won't penalize callers who don't need it, but <b>always give at least the basic guarantee</b>. The RAII (Resource Acquisition Is Initialization) pattern can help with achieving these guarantees.</p>
<dl class="section see"><dt>See also</dt><dd><a href="http://en.wikipedia.org/wiki/Resource_Acquisition_Is_Initialization">RAII</a></dd></dl>
<h3>Special considerations for Constructors</h3>
<p>Constructors are a bit special because if a failure occurs during their execution, the destructor won't be called (how could it? since the object wasn't constructed!). This can lead to leaked resources allocated in the constructor prior to the failure. Thankfully there is a nice C++ syntax to handle this case:</p>
<div class="fragment"><div class="line">Foo::Foo(<span class="keywordtype">size_t</span> s) <span class="keyword">try</span> : m_size(s), m_buf(new uint32_t[s]) {</div>
<div class="line">    <a class="code" href="group__errors.html#ga6699796354d3390864ae84163593af28">ASSERT_POSTCONDITION</a>(s&amp;0xF==0,</div>
<div class="line">        <span class="stringliteral">&quot;object size is %u, but must be multiple of 16&quot;</span>, s);</div>
<div class="line">} <span class="keywordflow">catch</span> (...) {</div>
<div class="line">    <span class="keyword">delete</span> [] m_buf;</div>
<div class="line">    <span class="comment">// the exception will be automatically re-thrown</span></div>
<div class="line">}</div>
<div class="ttc" id="agroup__errors_html_ga6699796354d3390864ae84163593af28"><div class="ttname"><a href="group__errors.html#ga6699796354d3390864ae84163593af28">ASSERT_POSTCONDITION</a></div><div class="ttdeci">#define ASSERT_POSTCONDITION(cond, format,...)</div><div class="ttdoc">ASSERT_POSTCONDITION is a macro that checks the given condition and reports a PostconditionPanic if i...</div><div class="ttdef"><b>Definition:</b> Panic.h:531</div></div>
</div><!-- fragment --><p>Unfortunately, this usage leaks the underlying, exception-based, implementation of the panic handling macros. For this reason, it is best to keep constructors simple and guarantee they can't fail. An <em>init()</em> function with a factory can be used for actual initialization.</p>
<h3>Special considerations for Destructors</h3>
<p>In C++ destructors cannot throw exceptions and since the above macros internally use exceptions they cannot be used in destructors. Doing so will result in immediate termination of the program by <em>std::terminate()</em>.<br  />
It is therefore best to always guarantee that destructors won't fail. In case of such a failure in a destructor the <a class="el" href="group__errors.html#gad56f7552f6625d78c39f87fadd7f790f" title="ASSERT_DESTRUCTOR is a macro that checks the given condition and logs an error if it evaluates to fal...">ASSERT_DESTRUCTOR()</a> macro can be used instead, it will log the failure but won't terminate the program, instead it'll proceed as if nothing happened. Generally this will result in some resource leak which, eventually, will cause another failure (typically a postcondition violation).<br  />
<br  />
 Rationale for this behavior: There are fundamentally no way to report a failure from a destructor in C++, violently terminating the process is inadequate because it again conflates failure reporting and failure handling; for instance a failure in glDeleteTextures() shouldn't be necessarily fatal (certainly not without saving the user's data first). The alternative would be for the caller to swallow the failure entirely, but that's not great either because the failure would go unnoticed. The solution retained here is a compromise.</p>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="group__errors.html#gad56f7552f6625d78c39f87fadd7f790f" title="ASSERT_DESTRUCTOR is a macro that checks the given condition and logs an error if it evaluates to fal...">ASSERT_DESTRUCTOR</a></dd></dl>
<h3>Testing Code that Uses Panics</h3>
<p>Since panics use exceptions for their underlying implementation, you can test code that uses panics with EXPECT_THROW by doing the following things: </p><ul>
<li>Set panic mode to THROW (default is TERMINATE) </li>
<li>Pass Panic to EXPECT_THROW as the exception type</li>
</ul>
<p>Example code for your test file:</p>
<div class="fragment"><div class="line"><span class="preprocessor">#include &lt;MyClass.hpp&gt;</span>  <span class="comment">// since your code uses panics, this should include utils/Panic.hpp</span></div>
<div class="line"> </div>
<div class="line"><span class="keyword">using</span> <a class="code" href="classutils_1_1_panic.html">utils::Panic</a>;</div>
<div class="line"> </div>
<div class="line">TEST(MyClassTest, value_that_causes_panic) {</div>
<div class="line">    EXPECT_THROW(MyClass::function(value_that_causes_panic), Panic);</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="comment">// ... other tests ...</span></div>
<div class="line"> </div>
<div class="line"><span class="keywordtype">int</span> main(<span class="keywordtype">int</span> argc, <span class="keywordtype">char</span>** argv) {</div>
<div class="line">    ::testing::InitGoogleTest(&amp;argc, argv);</div>
<div class="line">    Panic::setMode(Panic::Mode::THROW);</div>
<div class="line">    <span class="keywordflow">return</span> RUN_ALL_TESTS();</div>
<div class="line">}</div>
<div class="ttc" id="aclassutils_1_1_panic_html"><div class="ttname"><a href="classutils_1_1_panic.html">utils::Panic</a></div><div class="ttdoc">Base class of all exceptions thrown by all the ASSERT macros.</div><div class="ttdef"><b>Definition:</b> Panic.h:251</div></div>
</div><!-- fragment --> <h2 class="groupheader">Macro Definition Documentation</h2>
<a id="ga689b04f04a7f1a4ae53234b06668f23d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga689b04f04a7f1a4ae53234b06668f23d">&#9670;&nbsp;</a></span>ASSERT_ARITHMETIC</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define ASSERT_ARITHMETIC</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">cond, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">format, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>...</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td>&#160;&#160;&#160;    (!(cond) ? PANIC_ARITHMETIC(format, ##__VA_ARGS__) : (void)0)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>ASSERT_ARITHMETIC is a macro that checks the given condition and reports a ArithmeticPanic if it evaluates to false. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">cond</td><td>a boolean expression </td></tr>
    <tr><td class="paramname">format</td><td>printf-style string describing the error in more details</td></tr>
  </table>
  </dd>
</dl>
<p>Example: </p><div class="fragment"><div class="line">unt32_t floatToUInt1616(<span class="keywordtype">float</span> v) {</div>
<div class="line">    v *= 65536;</div>
<div class="line">    <a class="code" href="group__errors.html#ga689b04f04a7f1a4ae53234b06668f23d">ASSERT_ARITHMETIC</a>(v&gt;=0 &amp;&amp; v&lt;65536, <span class="stringliteral">&quot;overflow occurred&quot;</span>);</div>
<div class="line">    <span class="keywordflow">return</span> uint32_t(v);</div>
<div class="line">}</div>
<div class="ttc" id="agroup__errors_html_ga689b04f04a7f1a4ae53234b06668f23d"><div class="ttname"><a href="group__errors.html#ga689b04f04a7f1a4ae53234b06668f23d">ASSERT_ARITHMETIC</a></div><div class="ttdeci">#define ASSERT_ARITHMETIC(cond, format,...)</div><div class="ttdoc">ASSERT_ARITHMETIC is a macro that checks the given condition and reports a ArithmeticPanic if it eval...</div><div class="ttdef"><b>Definition:</b> Panic.h:559</div></div>
</div><!-- fragment --> 
</div>
</div>
<a id="gad56f7552f6625d78c39f87fadd7f790f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gad56f7552f6625d78c39f87fadd7f790f">&#9670;&nbsp;</a></span>ASSERT_DESTRUCTOR</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define ASSERT_DESTRUCTOR</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">cond, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">format, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>...</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td>&#160;&#160;&#160;(!(cond) ? PANIC_LOG(format, ##__VA_ARGS__) : (void)0)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>ASSERT_DESTRUCTOR is a macro that checks the given condition and logs an error if it evaluates to false. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">cond</td><td>a boolean expression </td></tr>
    <tr><td class="paramname">format</td><td>printf-style string describing the error in more details</td></tr>
  </table>
  </dd>
</dl>
<dl class="section warning"><dt>Warning</dt><dd>Use this macro if a destructor can fail, which should be avoided at all costs. Unlike the other ASSERT macros, this will never result in the process termination. Instead, the error will be logged and the program will continue as if nothing happened.</dd></dl>
<p>Example: </p><div class="fragment"><div class="line">Foo::~Foo() {</div>
<div class="line">   glDeleteTextures(1, &amp;m_texture);</div>
<div class="line">   GLint err = glGetError();</div>
<div class="line">   <a class="code" href="group__errors.html#gad56f7552f6625d78c39f87fadd7f790f">ASSERT_DESTRUCTOR</a>(err == GL_NO_ERROR, <span class="stringliteral">&quot;cannot free GL resource!&quot;</span>);</div>
<div class="line">}</div>
<div class="ttc" id="agroup__errors_html_gad56f7552f6625d78c39f87fadd7f790f"><div class="ttname"><a href="group__errors.html#gad56f7552f6625d78c39f87fadd7f790f">ASSERT_DESTRUCTOR</a></div><div class="ttdeci">#define ASSERT_DESTRUCTOR(cond, format,...)</div><div class="ttdoc">ASSERT_DESTRUCTOR is a macro that checks the given condition and logs an error if it evaluates to fal...</div><div class="ttdef"><b>Definition:</b> Panic.h:591</div></div>
</div><!-- fragment --> 
</div>
</div>
<a id="ga6699796354d3390864ae84163593af28"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga6699796354d3390864ae84163593af28">&#9670;&nbsp;</a></span>ASSERT_POSTCONDITION</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define ASSERT_POSTCONDITION</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">cond, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">format, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>...</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td>&#160;&#160;&#160;    (!UTILS_LIKELY(cond) ? PANIC_POSTCONDITION(format, ##__VA_ARGS__) : (void)0)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>ASSERT_POSTCONDITION is a macro that checks the given condition and reports a PostconditionPanic if it evaluates to false. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">cond</td><td>a boolean expression </td></tr>
    <tr><td class="paramname">format</td><td>printf-style string describing the error in more details</td></tr>
  </table>
  </dd>
</dl>
<p>Example: </p><div class="fragment"><div class="line"><span class="keywordtype">int</span>&amp; Foo::operator[](<span class="keywordtype">size_t</span> index) {</div>
<div class="line">    <a class="code" href="group__errors.html#ga6699796354d3390864ae84163593af28">ASSERT_POSTCONDITION</a>(index&lt;m_size, <span class="stringliteral">&quot;cannot produce a valid return value&quot;</span>);</div>
<div class="line">    <span class="keywordflow">return</span> m_array[index];</div>
<div class="line">}</div>
</div><!-- fragment --> 
</div>
</div>
<a id="ga6c2bbdd009ff224dfc99da167a249edd"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga6c2bbdd009ff224dfc99da167a249edd">&#9670;&nbsp;</a></span>ASSERT_PRECONDITION</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define ASSERT_PRECONDITION</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">cond, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">format, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>...</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td>&#160;&#160;&#160;    (!UTILS_LIKELY(cond) ? PANIC_PRECONDITION(format, ##__VA_ARGS__) : (void)0)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>ASSERT_PRECONDITION is a macro that checks the given condition and reports a PreconditionPanic if it evaluates to false. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">cond</td><td>a boolean expression </td></tr>
    <tr><td class="paramname">format</td><td>printf-style string describing the error in more details </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.1 </li>
  </ul>
</div>
</body>
</html>
